(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{240:function(e,t,n){},247:function(e,t,n){},255:function(e,t,n){},323:function(e,t,n){},324:function(e,t,n){},325:function(e,t,n){},326:function(e,t,n){},344:function(e,t,n){},345:function(e,t,n){},346:function(e,t,n){},376:function(e,t,n){},377:function(e,t,n){},378:function(e,t,n){},379:function(e,t,n){},380:function(e,t,n){},381:function(e,t,n){},382:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),a=n(33),s=n.n(a),o=(n(240),n(31)),i=n(41),l=n(16),u="SET_SESSION",j="CLEAR_SESSION",d="FETCHING_SESSION",b="KEEP_SESSION",O=n(113),p=n(67),m=n(385),f=n(384),h=n(401),g=n(402),x=n(403),v=n(404),y=n(405),_="SET_GROUP",w="LIST_GROUP_FAILED",k="LIST_GROUP_SUCCESS",S="FETCH_LOCATION",C="SET_LOCATION_FAILED",T="SET_LOCATION_SUCCESS",E=n(27),I=n(399),N=n(3);var F=function(e){var t=I.a.Search,n=Object(c.useState)(""),r=Object(E.a)(n,2),a=r[0],s=r[1],o=Object(i.g)(),l=(Object(i.j)().url,Object(i.i)()),u=l.query,j=l.filter;return Object(c.useEffect)((function(){if(j&&u){var e=decodeURIComponent(u);s(e)}}),[u]),Object(N.jsx)(t,{allowClear:!0,width:100,value:a,onSearch:function(){if(a){var e=encodeURIComponent(a.replace("%","%25")).replace("'","%27");o.push("/search/all/".concat(e))}},placeholder:"search...",onChange:function(e){return s(e.target.value)}})},R=n(389),G=n(397);var P=function(e){var t=Object(c.useState)(0),n=Object(E.a)(t,2),r=n[0],a=n[1],s=Object(l.c)((function(e){return e.session})),i=s.socket,u=s.user,j=Object(l.c)((function(e){return e.groups})).listGroup;return Object(c.useEffect)((function(){i&&(i.emit("client-get-unread-posts",{idGroup:e._id,idUser:u._id}),i.on("server-send-unread-posts",(function(t){var n=t.idGroup,c=t.count;if(c.length>0&&n===e._id){console.log("unread count",e.name,c),a(c.length);j.map((function(t){c.filter((function(t){return t.belongToGroup===e._id}));return{}}))}})))}),[i,e]),Object(N.jsx)("div",{style:{margin:"0.5em",maxWidth:"200px",minWidth:"150px",cursor:"pointer"},children:Object(N.jsx)(G.a,{className:"group-badge",count:r,children:Object(N.jsx)(o.c,{to:"/group/".concat(e._id),style:{display:"inline-block",borderRadius:"1em",color:"black",backgroundColor:"#95cbff",fontWeight:"bold",padding:"1em"},activeStyle:{backgroundColor:"#187cdc",color:"white"},children:e.name})})})};n(247);var L=function(e){var t=Object(l.c)((function(e){return e.session})),n=t.socket,r=(t.user,Object(l.c)((function(e){return e.groups})).listGroup),a=Object(l.b)(),s=e.title||!1;return Object(c.useEffect)((function(){n&&(n.emit("client-get-list-groups"),n.once("server-send-list-groups",(function(e){var t=e.listGroup;t.length>0&&a({type:k,payload:{listGroup:t}})})))}),[n]),Object(N.jsxs)("div",{style:s?{backgroundColor:"white",border:"2px solid #eeeeee",borderTop:"none",borderRadius:"0 0 10px 10px"}:null,children:[s&&Object(N.jsxs)("div",{style:{padding:"0 1em"},children:[" ",Object(N.jsx)("h3",{children:s})," ",Object(N.jsx)(f.a,{})," "]}),Object(N.jsx)(R.b,{style:{maxHeight:"calc(100vh - 99px - 72px)",overflowY:"scroll",padding:"0 1em"},dataSource:r,renderItem:function(e){return Object(N.jsx)(P,{_id:e._id,name:e.name,count:e.count},e._id)}})]})},A="SIGN_IN",U="SIGN_IN_GOOGLE",H="SIGN_OUT",M="SIGN_IN_START",D="SIGN_IN_SUCCESS",q="SIGN_IN_FAILURE";n(255);var V=function(e){var t=Object(l.c)((function(e){return e.session})).user,n=Object(l.b)(),c=Object(i.g)(),r={center:{display:"flex",justifyContent:"center",alignItems:"center"}},a=function(e,t){n({type:_,payload:{currentGroup:{_id:null,name:null}}})},s=function(){a(),c.push("/admin")},u=function(){console.log("clicked Log out"),n({type:H}),t||c.push("/login")};return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsxs)(O.a,{style:{padding:"1em 1em 0 1em"},children:[Object(N.jsx)(p.a,{xs:6,children:Object(N.jsxs)("div",{className:"logo",children:[Object(N.jsx)("span",{children:"T"}),Object(N.jsx)("span",{children:"D"}),Object(N.jsx)("span",{children:"T"}),Object(N.jsx)("span",{children:"zone"})]})}),Object(N.jsx)(p.a,{xs:0,sm:10,children:Object(N.jsx)(F,{})}),Object(N.jsx)(p.a,{xs:18,sm:8,children:Object(N.jsxs)(O.a,{style:{height:"100%"},children:[Object(N.jsx)(p.a,{xs:4,sm:0}),Object(N.jsx)(p.a,{xs:4,sm:6,style:r.center,children:Object(N.jsx)(h.a,{onClick:function(){a(),c.push("/")}})}),Object(N.jsx)(p.a,{xs:4,sm:0,children:Object(N.jsx)("div",{className:"mobile_group_icon",children:Object(N.jsx)(m.a,{overlay:function(){return Object(N.jsx)(L,{title:"T\u1ed5ng H\u1ee3p"})},placement:"bottomCenter",children:Object(N.jsx)(g.a,{})})})}),Object(N.jsx)(p.a,{xs:4,sm:6,style:r.center,children:Object(N.jsx)(m.a,{overlay:"Notification",placement:"bottomCenter",children:Object(N.jsx)(x.a,{})})}),Object(N.jsx)(p.a,{xs:4,sm:6,style:r.center,children:Object(N.jsx)(v.a,{onClick:function(){a(),c.push("/me")}})}),Object(N.jsx)(p.a,{xs:4,sm:6,style:r.center,children:Object(N.jsx)(m.a,{overlay:function(){return Object(N.jsxs)("div",{children:["admin"===t.role?Object(N.jsx)("div",{onClick:s,children:" Admin "}):null,Object(N.jsx)(o.b,{to:"/setting",style:{color:"black"},children:"Profile info"}),Object(N.jsx)("div",{onClick:u,children:"Logout here"})]})},placement:"bottomRight",children:Object(N.jsx)(y.a,{})})})]})})]}),Object(N.jsx)("div",{className:"mobile_search",children:Object(N.jsx)(F,{})}),Object(N.jsx)(f.a,{style:{marginBottom:0}})]})},B=n(228),z=n(219),K=n(62),Y=n(30),W=n(7),X=n(81),J=n.n(X),Q=n(390),Z=n(393),$=n(227),ee=n(395),te=n(392),ne=n(235),ce=n(93),re=n(76),ae=n(85),se=n(391),oe=n(49),ie=n(386);function le(e){var t=e.data;console.log(t);return Object(N.jsx)(ie.a,{style:{padding:"0 1em",backgroundColor:"#f1f1f1",width:"100%",borderRadius:"1em"},author:Object(N.jsx)("p",{children:t.owner.name}),avatar:t.owner.image?Object(N.jsx)($.a,{src:t.owner.image}):Object(N.jsx)("div",{style:{width:"24px",height:"24px",paddingBottom:"5px",borderRadius:"12px",display:"flex",justifyContent:"center",alignItems:"center",color:"red",backgroundColor:"orange",fontWeight:"bold",fontSize:"1em",textTransform:"uppercase"},children:t.owner.name[0]}),content:Object(N.jsxs)("p",{children:[" ",t.content," "]}),datetime:Object(N.jsx)("span",{children:J()(t.createdAt).fromNow("HH:mm DD-MM-YYYY")})})}var ue=r.a.memo(le),je="MAKING_POST",de="REACT_POST",be="PUSH_NEW_POST",Oe="FETCH_MORE_POST",pe="FETCH_MORE_POST_START",me="FETCH_MORE_POST_SUCCESS",fe="FETCH_MORE_POST_FAILURE",he="FETCH_POST",ge="FETCH_POST_START",xe="FETCH_POST_SUCCESS",ve="FETCH_POST_FAILURE";var ye=function(e){var t=e.containerState,n=(e.setContainerState,Object(l.c)((function(e){return e.session}))),r=n.socket,a=n.user,s=(Object(l.c)((function(e){return e.posts})).posts,Object(c.useState)({content:"",belongToPost:t.postId})),o=Object(E.a)(s,2),i=o[0],u=o[1],j=Object(c.useState)([]),d=Object(E.a)(j,2),b=d[0],m=d[1],f=(Object(l.b)(),Object(N.jsxs)(se.a,{style:{width:"100%"},onFieldsChange:function(e,t){e.forEach((function(e){u((function(t){return Object(W.a)(Object(W.a)({},t),{},Object(ae.a)({},"".concat(e.name[0]),e.value))}))}))},children:[Object(N.jsx)(O.a,{children:!t.loading&&t.isShow?b.length<t.comments.length?Object(N.jsx)(oe.a,{style:{margin:"10px 0",border:"none",outline:"none",padding:0},onClick:function(){var e=t.comments.filter((function(e){return!b.includes(e)}));e=b.length>=e.length?e.slice():e.slice(-e.length/2),m([].concat(Object(Y.a)(e),Object(Y.a)(b)))},children:"loading more"}):Object(N.jsx)(oe.a,{style:{margin:"10px 0",border:"none",outline:"none",padding:0},onClick:function(){m(Object(Y.a)(t.comments.slice(-2)))},children:"collapse comments"}):null}),Object(N.jsxs)(O.a,{children:[Object(N.jsx)(p.a,{flex:"4",children:Object(N.jsx)(se.a.Item,{name:"content",value:i.content,rules:[{required:!0,message:"Please input your comment"}],children:Object(N.jsx)(I.a.TextArea,{autoSize:{minRows:1,maxRows:2},placeholder:"Type your comment here! :)"})})}),Object(N.jsx)(p.a,{flex:"1",children:Object(N.jsx)(se.a.Item,{children:Object(N.jsx)(oe.a,{type:"primary",htmlType:"button",onClick:function(){console.log("onComment",t),console.log("comment",i),i.content&&(r.emit("client-comment-post",{owner:a._id,content:i.content,belongToPost:i.belongToPost}),u((function(e){return Object(W.a)(Object(W.a)({},e),{},{content:""})})))},children:"Comment"})})})]})]}));return Object(c.useEffect)((function(){m(Object(Y.a)(t.comments.slice(-2)))}),[t]),Object(N.jsxs)(N.Fragment,{children:[t.error&&Object(N.jsxs)("p",{children:["Error: ",t.error]}),Object(N.jsx)(R.b,{style:{backgroundColor:"white",padding:"0 1em 0 1em"},className:"demo-loadmore-list",loading:t.loading,itemLayout:"horizontal",footer:f,dataSource:b,renderItem:function(e){return Object(N.jsx)(R.b.Item,{children:Object(N.jsx)(ue,{data:e})})}})]})},_e=n(406),we=n(407);var ke=function(e){var t=e.like,n=e.onClick,c=Object(l.c)((function(e){return e.session})).user,r=t.find((function(e){return e==c._id}));return Object(N.jsxs)("div",{onClick:n,children:[void 0===r?Object(N.jsx)(_e.a,{}):Object(N.jsx)(we.a,{})," ",t.length]})},Se=n(408),Ce=n(409);var Te=function(e){var t=e.dislike,n=e.onClick,c=Object(l.c)((function(e){return e.session})).user,r=t.find((function(e){return e==c._id}));return Object(N.jsxs)("div",{onClick:n,children:[void 0===r?Object(N.jsx)(Se.a,{}):Object(N.jsx)(Ce.a,{})," ",t.length]})},Ee=n(410);var Ie=function(e){var t=e.cmtCounter,n=e.onClick;return Object(N.jsxs)("div",{onClick:n,children:[Object(N.jsx)(Ee.a,{})," ",t]})},Ne=Q.a.Meta,Fe=Z.a.Paragraph;function Re(e){var t=e.post,n=Object(c.useState)({postId:t._id,comments:[],loading:!1,error:null,isShow:!1}),r=Object(E.a)(n,2),a=r[0],s=r[1],i=Object(c.useRef)(null),u=Object(l.c)((function(e){return e.session})),j=u.socket,d=u.user,b=Object(l.b)(),O=function(e){j.emit("client-react-post",{id:t._id,user:d._id,reaction:e})};return Object(c.useEffect)((function(){j&&j.once("server-send-react-post",(function(e){var n=e.error,c=e.post,r=e.postId;n&&null!==n&&r==t._id?(console.log(n),s(Object(W.a)(Object(W.a)({},a),{},{loading:!1,error:n.message}))):c&&r===t._id&&(console.log("reacted post",c),b({type:de,payload:{reactedPost:c}}))}))}),[t]),Object(c.useEffect)((function(){s(Object(W.a)(Object(W.a)({},a),{},{loading:!0,error:null})),j&&(j.emit("client-req-cmt",{postId:t._id}),j.on("server-send-comment-list",(function(e){e.error&&e.postId==t._id?(console.log(e.error.message),s(Object(W.a)(Object(W.a)({},a),{},{loading:!1,error:e.error.message}))):e.comments&&e.postId==t._id&&s(Object(W.a)(Object(W.a)({},a),{},{loading:!1,comments:e.comments,error:null}))})))}),[t._id]),Object(c.useEffect)((function(){j&&j.on("server-send-comment-post",(function(e){var n=e.error,c=e.comment,r=e.belongToPost;null!==n&&void 0!==n&&n&&console.log("error",n.message),c&&r===t._id&&s(Object(W.a)(Object(W.a)({},a),{},{comments:[c].concat(Object(Y.a)(a.comments))}))}))}),[a]),Object(N.jsxs)("div",{style:{width:"100%",margin:"1em 0"},children:[Object(N.jsxs)(Q.a,{style:{width:"100%"},actions:[Object(N.jsx)(ke,{onClick:function(){return O("likes")},like:t.likes}),Object(N.jsx)(Te,{onClick:function(){return O("dislikes")},dislike:t.dislikes}),Object(N.jsx)(Ie,{cmtCounter:a.comments.length,onClick:function(){return s((function(e){return Object(W.a)(Object(W.a)({},e),{},{isShow:!e.isShow})}))}})],children:[Object(N.jsx)(Ne,{avatar:t.owner.image?Object(N.jsx)($.a,{src:t.owner.image}):Object(N.jsx)("div",{style:{width:"32px",height:"32px",paddingBottom:"5px",borderRadius:"16px",display:"flex",justifyContent:"center",alignItems:"center",color:"red",backgroundColor:"orange",fontWeight:"bold",fontSize:"1.5em",textTransform:"uppercase"},children:t.owner.name[0]}),title:Object(N.jsxs)("p",{style:{marginBottom:0},children:[Object(N.jsxs)("b",{children:[Object(N.jsx)(o.c,{style:{color:"black"},to:"/user/".concat(t.owner._id),children:t.owner.name}),t.belongToGroup&&Object(N.jsxs)("span",{children:[Object(N.jsx)(ne.a,{}),Object(N.jsx)(o.c,{style:{color:"black"},to:"/group/".concat(t.belongToGroup._id),children:t.belongToGroup.name})]})]}),Object(N.jsx)("br",{}),Object(N.jsx)("small",{children:J()(t.createdAt).format("hh:mm, Do MMMM YYYY")})]}),style:{padding:"1em",userSelect:"none"}}),Object(N.jsxs)(Q.a.Grid,{style:{width:"100%",paddingBottom:0},hoverable:!1,children:[Object(N.jsx)(Fe,{ellipsis:{rows:3,expandable:!0,symbol:"more"},children:t.content}),Object(N.jsx)(ee.a,{ref:i,children:t.image.map((function(e,t){return Object(N.jsx)(te.a,{style:{width:"100%"},src:e},t)}))}),Object(N.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"space-between",padding:5},children:[t.image.length>1?Object(N.jsx)(ce.a,{onClick:function(){return i.current.next()},onSelect:function(){return!1}}):null,t.image.length>1?Object(N.jsx)(re.a,{onClick:function(){return i.current.prev()},onSelect:function(){return!1}}):null]})]})]}),a.isShow&&Object(N.jsx)(ye,{containerState:a,setContainerState:function(e){return s(e)}})]})}var Ge=r.a.memo(Re),Pe=n(26),Le=n.n(Pe),Ae=n(65),Ue=n(396),He=n(388),Me=n(234);n(323);function De(e){return new Promise((function(t,n){var c=new FileReader;c.readAsDataURL(e),c.onload=function(){return t(c.result)},c.onerror=function(e){return n(e)}}))}var qe=function(e){var t=Q.a.Meta,n=Object(i.i)().idGroup,r=Object(c.useState)(""),a=Object(E.a)(r,2),s=a[0],o=a[1],u=Object(c.useState)(!1),j=Object(E.a)(u,2),d=j[0],b=j[1],O=Object(c.useState)(!1),p=Object(E.a)(O,2),m=p[0],f=p[1],h=Object(c.useState)("Content of the modal"),g=Object(E.a)(h,2),x=(g[0],g[1]),v=Object(l.b)(),y=Object(l.c)((function(e){return e.session})).user,_=Object(c.useRef)(null),w=se.a.useForm(),k=Object(E.a)(w,1)[0];function S(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,c=null;c="success"===t?Ue.a.success({title:"Th\xf4ng b\xe1o",content:e}):Ue.a.info({title:"C\u1ea3nh b\xe1o",content:e});var r=setInterval((function(){n-=1}),1e3);setTimeout((function(){clearInterval(r),c.destroy()}),1e3*n)}var C=function(){o(""),b(!1),k.resetFields(),f(!1)},T=function(e){setTimeout(Object(Ae.a)(Le.a.mark((function t(){var n;return Le.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(Object(Y.a)(P.fileList.map(function(){var e=Object(Ae.a)(Le.a.mark((function e(t){return Le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,De(t.originFileObj);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())));case 2:n=t.sent,v({type:je,payload:{content:s,fileList:n,belongToGroup:e}}),C();case 6:case"end":return t.stop()}}),t)}))),2e3)},F=function(){b(!1),k.resetFields()},R=Object(c.useState)({previewVisible:!1,previewImage:"",previewTitle:"",fileList:[]}),G=Object(E.a)(R,2),P=G[0],L=G[1],A=function(){var e=Object(Ae.a)(Le.a.mark((function e(t){return Le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.url||t.preview){e.next=4;break}return e.next=3,De(t.originFileObj);case 3:t.preview=e.sent;case 4:L(Object(W.a)(Object(W.a)({},P),{},{previewImage:t.url||t.preview,previewVisible:!0,previewTitle:t.name||t.url.substring(t.url.lastIndexOf("/")+1)}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=Object(N.jsxs)("div",{children:[Object(N.jsx)(Me.a,{}),Object(N.jsx)("div",{style:{marginTop:8},children:"Upload"})]});return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsxs)("div",{className:"write-post",children:[Object(N.jsx)($.a,{src:y.image}),Object(N.jsx)("div",{className:"write-post__title",onClick:function(){b(!0)},children:"C\xf3 \u0111i\u1ec1u g\xec m\u1edbi kh\xf4ng? :)"})]}),Object(N.jsx)(Ue.a,{title:"T\u1ea1o b\xe0i vi\u1ebft",visible:d,bodyStyle:{padding:"1em"},closable:!0,onCancel:F,style:{top:30},footer:[Object(N.jsx)(oe.a,{type:"primary",loading:m,onClick:function(){if(_.current.click(),""!==s){x("The modal will be closed after two seconds"),f(!0);var e=""!==n&&void 0!==n?n:null;console.log("test belongToGroup",e),null===e?(T(e),S("\u0110\u0103ng b\xe0i l\xean t\u01b0\u1eddng th\xe0nh c\xf4ng")):"admin"===y.role||"admin"!==y.role&&y.manageGroup.includes(e)?(T(e),S("\u0110\u0103ng th\xf4ng b\xe1o th\xe0nh c\xf4ng")):(C(),S("B\u1ea1n kh\xf4ng c\xf3 quy\u1ec1n \u0111\u0103ng b\xe0i","info"))}},children:"\u0110\u0103ng b\xe0i"},"submit"),Object(N.jsx)(oe.a,{onClick:F,children:"\u0110\xf3ng"},"back")],children:Object(N.jsxs)(Q.a,{style:{width:"100%"},bordered:!1,children:[Object(N.jsx)(t,{avatar:Object(N.jsx)($.a,{src:y.image}),title:y.name}),Object(N.jsx)(Q.a.Grid,{hoverable:!1,style:{width:"100%"},children:Object(N.jsxs)(se.a,{form:k,children:[Object(N.jsx)(se.a.Item,{name:"content",rules:[{required:!0,message:"Vui l\xf2ng vi\u1ebft g\xec \u0111\xf3"}],children:Object(N.jsx)(I.a.TextArea,{placeholder:"Vi\u1ebft g\xec \u0111\xf3...",autoSize:{minRows:3},bordered:!1,value:s,onChange:function(e){return o(e.target.value)}})}),Object(N.jsx)(se.a.Item,{hidden:!0,children:Object(N.jsx)(oe.a,{ref:_,type:"submit",htmlType:"submit"})}),Object(N.jsxs)(se.a.Item,{children:[Object(N.jsx)(He.a,{listType:"picture-card",fileList:P.fileList,onPreview:A,onChange:function(e){var t=e.fileList;return L(Object(W.a)(Object(W.a)({},P),{},{fileList:t}))},children:U}),Object(N.jsx)(Ue.a,{visible:P.previewVisible,title:P.previewTitle,footer:null,onCancel:function(){return L(Object(W.a)(Object(W.a)({},P),{},{previewVisible:!1}))},children:Object(N.jsx)("img",{alt:"example",style:{width:"100%"},src:P.previewImage})})]})]})})]})})]})};n(324);function Ve(e){var t=e.name,n=e.greeting;return Object(N.jsxs)("div",{className:"title-group",children:[t," ",n]})}var Be="PUSH_ERROR",ze="CLEAR_ERROR",Ke=(n(325),"PUSH_MESS"),Ye="CLEAR_MESS";var We=function(e){var t=Object(l.c)((function(e){return e.groups})).location,n=Object(l.c)((function(e){return e.session})).user,r=Object(l.c)((function(e){return e})),a=r.posts,s=r.error,o=r.mess,i=Object(l.b)(),u=Object(c.useState)(""),j=Object(E.a)(u,2),d=j[0],b=j[1];return Object(c.useEffect)((function(){t&&("g"===t.type?b("".concat(t.name," xin ch\xe0o!")):"n"===t.type?b("Ch\xe0o ".concat(n.name,"! Newfeed c\u1ee7a b\u1ea1n c\xf3 \u0111i\u1ec1u m\u1edbi \u0111\u1ea5y!")):"u"===t.type&&b("\u0110\xe2y l\xe0 d\xf2ng th\u1eddi gian c\u1ee7a ".concat(t.name))),console.log(d)}),[t]),Object(c.useEffect)((function(){s.content&&(B.b.error(s.content),i({type:ze}))}),[s]),Object(c.useEffect)((function(){o.content&&(B.b.success(o.content),i({type:Ye}))}),[o.content]),Object(N.jsxs)("div",{className:"main",children:[Object(N.jsxs)("div",{className:"main__left",children:[Object(N.jsxs)("div",{className:"main__left__title",children:[Object(N.jsx)("h3",{children:"T\u1ed5ng H\u1ee3p"}),Object(N.jsx)(f.a,{})]}),Object(N.jsx)(L,{})]}),Object(N.jsxs)("div",{className:"main__right",children:[Object(N.jsx)(O.a,{style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"},children:Object(N.jsx)(Ve,{greeting:d})}),Object(N.jsx)(O.a,{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:Object(N.jsx)(qe,{})}),Object(N.jsxs)(O.a,{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[a.posts.map((function(e){return Object(N.jsx)("div",{className:"post",children:Object(N.jsx)(Ge,{post:e})},e._id)})),a.isFetching?Object(N.jsx)(z.a,{indicator:Object(N.jsx)(K.a,{style:{fontSize:24},spin:!0})}):Object(N.jsx)("p",{className:"load-more",onClick:function(){return i({type:Oe,payload:{location:e.location}})},children:"load more"})]})]})]})};function Xe(e){var t=Object(l.b)(),n=Object(l.c)((function(e){return e.session})),r=n.socket,a=n.user,s=Object(i.i)().idGroup,o=Object(i.i)().idUser,u=Object(i.h)().pathname.split("/"),j={};return s&&(j={belongToGroup:s}),o&&(j={owner:o}),"me"===u[1]&&(j={owner:a._id,belongToGroup:null}),Object(c.useEffect)((function(){console.log(j),r&&(t({type:S,payload:{location:j}}),t({type:he,payload:{location:j}}))}),[j]),Object(N.jsxs)("div",{children:[Object(N.jsx)(V,{}),Object(N.jsx)(We,{location:j})]})}var Je=n(74),Qe=n(387),Ze=n(400),$e=n(411),et=(n(191),n(326),n(223));function tt(){var e=Object(l.b)(),t=function(){var t=Object(Ae.a)(Le.a.mark((function t(n){var c;return Le.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("onSuccess login with Google"),c=null===n||void 0===n?void 0:n.profileObj,console.log("login gg",c);try{e({type:U,payload:{user:c}})}catch(r){console.log(r)}case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(c.useEffect)((function(){}),[]),Object(N.jsx)("div",{children:Object(N.jsx)(et.GoogleLogin,{clientId:"446368611163-5i3vhh6mq7n1li3ep14eegjbk4ngd8q5.apps.googleusercontent.com",buttonText:"Google",onSuccess:t,onFailure:function(e){console.log("onFailure login with Google"),console.log(e)},cookiePolicy:"single_host_origin"})})}var nt=Qe.a.Header,ct=Qe.a.Footer,rt=(Qe.a.Sider,Qe.a.Content);function at(e){var t=e.deviceType,n=(Object(i.g)(),Object(l.b)()),r=Object(c.useState)({remember:!0,username:"admin",password:"123"}),a=Object(E.a)(r,2),s=a[0],u=a[1],j={remember:s.remember,username:s.remember?s.username:"",password:s.remember?s.password:""};return Object(N.jsxs)(Qe.a,{className:"login-page",children:[Object(N.jsx)(nt,{children:Object(N.jsxs)("div",{className:"login-page__header",children:[Object(N.jsx)("div",{className:"login-page__header-icon",children:Object(N.jsx)(g.a,{spin:!1})}),Object(N.jsx)("div",{className:"login-page__header-text",children:Object(N.jsx)("h4",{children:"Login"})})]})}),Object(N.jsx)(rt,{children:Object(N.jsx)("div",{className:"login-page__body",children:Object(N.jsxs)("div",{className:"login-form",children:[Object(N.jsx)("div",{className:t?"login-form__body-mobile":"login-form__body",children:Object(N.jsxs)(se.a,{initialValues:Object(W.a)({},j),onFieldsChange:function(e,t){e.forEach((function(e){u((function(t){return Object(W.a)(Object(W.a)({},t),{},Object(ae.a)({},"".concat(e.name[0]),e.value))}))}))},onFinish:function(e){console.log("onFinish"),console.log(e);var t=e.remember,c=(e.submit,Object(Je.a)(e,["submit"]));t&&(console.log("Remember me"),u(c)),n({type:A,payload:{username:s.username,password:s.password}})},onFinishFailed:function(e){var t=e.values,n=e.errorFields,c=e.outOfDate;console.log("Failed: errorInfo"),console.log({values:t,errorFields:n,outOfDate:c})},children:[Object(N.jsx)(se.a.Item,{label:"Username",name:"username",rules:[{required:!0,message:"Please input your Username!"}],children:Object(N.jsx)(I.a,{prefix:Object(N.jsx)(v.a,{className:"site-form-item-icon"}),value:s.username})}),Object(N.jsx)(se.a.Item,{label:"Password",name:"password",rules:[{required:!0,type:"string",message:"Please input your Password!",min:3,max:20}],children:Object(N.jsx)(I.a.Password,{prefix:Object(N.jsx)($e.a,{className:"site-form-item-icon"})})}),Object(N.jsxs)("div",{className:"login-form__body-action",children:[Object(N.jsx)("div",{className:"login-form__body-action-remember",children:Object(N.jsx)(se.a.Item,{name:"remember",valuePropName:"checked",children:Object(N.jsx)(Ze.a,{children:"Remember me"})})}),Object(N.jsx)("div",{className:"login-form__body-action-forgotPassword",children:Object(N.jsx)("p",{children:Object(N.jsx)(o.b,{to:"/forgot",children:"Forgot password"})})}),Object(N.jsx)("div",{className:"login-form__body-action-submit",children:Object(N.jsx)(se.a.Item,{name:"submit",children:Object(N.jsx)(oe.a,{type:"primary",htmlType:"submit",children:"Submit"})})})]})]})}),Object(N.jsx)("div",{className:"login-form__footer",children:Object(N.jsx)("div",{className:"login-form__footer-action",children:Object(N.jsx)(tt,{})})})]})})}),Object(N.jsx)(ct,{children:Object(N.jsx)("div",{className:"login-page__footer",children:Object(N.jsx)("p",{children:" Social Network \xa9 2021 "})})})]})}var st=n(394),ot=n(398),it=n(125),lt=n.n(it);n(344);function ut(){Object(l.b)(),ot.a.Group,ot.a.Button;var e=Object(c.useState)({username:"",password:"",manageGroup:[],groups:[]}),t=Object(E.a)(e,2),n=t[0],r=t[1],a=n.groups,s=n.manageGroup,o={remember:n.remember,username:n.remember?n.username:"",password:n.remember?n.password:""},i=function(){var e=Object(Ae.a)(Le.a.mark((function e(t){var n;return Le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.submit,n=Object(Je.a)(t,["submit"]),n=Object(W.a)(Object(W.a)({},n),{},{manageGroup:s}),e.next=4,lt.a.post("http://localhost:4000/users/",n);case 4:200===e.sent.data.code?j("T\u1ea1o ng\u01b0\u1eddi d\xf9ng m\u1edbi th\xe0nh c\xf4ng."):j("T\u1ea1o ng\u01b0\u1eddi d\xf9ng m\u1edbi th\u1ea5t b\u1ea1i.");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function u(e){var t=e.target,n=t.checked,c=t.value;r((function(e){return Object(W.a)(Object(W.a)({},e),{},{manageGroup:n?[].concat(Object(Y.a)(e.manageGroup),[c]):Object(Y.a)(e.manageGroup.filter((function(e){return!(e===c)})))})})),console.log("checked = ",e),console.log("manageGroup ",s),console.log("value = ",s.indexOf(c))}function j(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=Ue.a.success({title:"Th\xf4ng b\xe1o",content:e}),c=setInterval((function(){t-=1}),1e3);setTimeout((function(){clearInterval(c),n.destroy()}),1e3*t)}return Object(c.useEffect)((function(){lt.a.get("http://localhost:4000/groups/").then((function(e){200===e.data.code?e.data.data!==n.groups&&(r((function(t){return Object(W.a)(Object(W.a)({},t),{},{groups:e.data.data.map((function(e){return{_id:e._id,name:e.name}}))})})),console.log("test")):console.log(e.data.error)}))}),[]),Object(N.jsxs)("div",{className:"main-admin",children:[Object(N.jsxs)("div",{className:"main-admin__left",children:[Object(N.jsx)("h3",{className:"main-admin__title",children:"Create new user"}),Object(N.jsx)("div",{children:Object(N.jsxs)(se.a,{initialValues:Object(W.a)({},o),onFieldsChange:function(e,t){e.forEach((function(e){r((function(t){return Object(W.a)(Object(W.a)({},t),{},Object(ae.a)({},"".concat(e.name[0]),e.value))}))}))},onFinish:i,onFinishFailed:function(e){var t=e.values,n=e.errorFields,c=e.outOfDate;console.log("Failed: errorInfo"),console.log({values:t,errorFields:n,outOfDate:c})},children:[Object(N.jsx)(se.a.Item,{label:"Name",name:"name",rules:[{required:!0,message:"Vui l\xf2ng nh\u1eadp t\xean ng\u01b0\u1eddi d\xf9ng!"}],children:Object(N.jsx)(I.a,{prefix:Object(N.jsx)(v.a,{className:"site-form-item-icon"}),value:n.username})}),Object(N.jsx)(se.a.Item,{label:"Username",name:"username",rules:[{required:!0,message:"Vui l\xf2ng nh\u1eadp t\xean \u0111\u0103ng nh\u1eadp ng\u01b0\u1eddi d\xf9ng!"}],children:Object(N.jsx)(I.a,{prefix:Object(N.jsx)(v.a,{className:"site-form-item-icon"}),value:n.username})}),Object(N.jsx)(se.a.Item,{label:"Password",name:"password",rules:[{required:!0,type:"string",message:"Vui l\xf2ng nh\u1eadp m\u1eadt kh\u1ea9u!",min:3,max:20}],children:Object(N.jsx)(I.a.Password,{prefix:Object(N.jsx)($e.a,{className:"site-form-item-icon"})})}),Object(N.jsxs)("div",{className:"login-form__body-action",children:[Object(N.jsx)("small",{style:{padding:"0.5em"},children:"Remeber to select group for new user!"}),Object(N.jsx)("div",{className:"login-form__body-action-submit",children:Object(N.jsx)(se.a.Item,{name:"submit",children:Object(N.jsx)(oe.a,{type:"primary",htmlType:"submit",children:"Create"})})})]})]})})]}),Object(N.jsxs)("div",{className:"main-admin__right",children:[Object(N.jsx)("h3",{className:"main-admin__title",children:"Select group(s) for your new user"}),Object(N.jsx)("div",{className:"main-admin__right__list",children:a.map((function(e){return Object(N.jsx)(O.a,{className:"main-admin__right__list__item",children:Object(N.jsx)(p.a,{span:8,children:Object(N.jsx)(Ze.a,{onChange:u,value:e._id,checked:s.indexOf(e._id)>=0,children:e.name})})},e._id)}))})]})]})}n(345);function jt(){var e=Object(l.c)((function(e){return e.session})).socket,t=Object(c.useState)({manageUser:[],users:[],selectedUser:null}),n=Object(E.a)(t,2),r=n[0],a=n[1],s=r.users,o=r.manageUser,i=Object(c.useState)(!1),u=Object(E.a)(i,2),j=u[0],d=u[1],b=function(){r.selectedUser&&(g(r.selectedUser),a((function(e){return Object(W.a)(Object(W.a)({},e),{},{selectedUser:null})}))),d(!1)},m=function(){a((function(e){return Object(W.a)(Object(W.a)({},e),{},{selectedUser:null})})),d(!1)};function f(e){var t=e.target,n=t.checked,c=t.value;a((function(e){return Object(W.a)(Object(W.a)({},e),{},{manageUser:n?[c]:[]})}))}Object(c.useEffect)((function(){e&&(e.emit("client-get-list-users"),e.on("server-send-list-users",(function(e){var t=e.list;t.length>0&&(console.log("admin list user",t),a((function(e){return Object(W.a)(Object(W.a)({},e),{},{users:t})})))})),e.once("server-send-admin-delete-user",(function(e){var t=e.message;t&&function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=Ue.a.success({title:"Th\xf4ng b\xe1o",content:e}),c=setInterval((function(){t-=1}),1e3);setTimeout((function(){clearInterval(c),n.destroy()}),1e3*t)}(t)})))}),[e,r.users]);var h=function(e){var t=e._id;return Object(N.jsx)(oe.a,{style:{marginLeft:"2em"},type:"danger",onClick:function(){return function(e){d(!0),a((function(t){return Object(W.a)(Object(W.a)({},t),{},{selectedUser:e})}))}(t)},children:"X\xf3a"})},g=function(t){e.emit("client-request-admin-delete-user",{_id:t})};return Object(N.jsx)("div",{className:"main-admin",children:Object(N.jsxs)("div",{className:"main-admin__right",children:[Object(N.jsx)("h3",{className:"main-admin__title",children:"C\xe1c T\xe0i kho\u1ea3n ph\xf2ng ban ho\u1eb7c Khoa"}),Object(N.jsx)("div",{className:"main-admin__right__list",children:s.map((function(e){return Object(N.jsx)("div",{children:Object(N.jsxs)(O.a,{className:"main-admin__right__list__item",children:[Object(N.jsx)(p.a,{span:8,children:Object(N.jsxs)(Ze.a,{onChange:f,value:e._id,checked:o.indexOf(e._id)>=0,children:[e.name,o.indexOf(e._id)>=0&&Object(N.jsx)(h,{_id:e._id})]})}),Object(N.jsx)(p.a,{children:Object(N.jsx)(Ue.a,{title:"X\xe1c nh\u1eadn",visible:j,footer:[Object(N.jsx)(oe.a,{type:"danger",onClick:b,children:"X\xe1c nh\u1eadn"},"submit"),Object(N.jsx)(oe.a,{onClick:m,children:"H\u1ee7y b\u1ecf"},"back")],children:Object(N.jsx)("p",{children:"B\u1ea1n c\xf3 th\u1eadt s\u1ef1 mu\u1ed1n x\xf3a t\u1ea1i kho\u1ea3n n\xe0y?"})})})]},e._id)})}))})]})})}n(346);function dt(){var e=Object(c.useState)(!1),t=Object(E.a)(e,2),n=t[0],r=t[1];return Object(c.useEffect)((function(){}),[]),Object(N.jsx)("div",{className:"admin-container",children:Object(N.jsxs)(st.a,{ghost:!1,onBack:function(){return window.history.back()},title:n?"T\u1ea1o m\u1edbi t\xe0i kho\u1ea3n":"Qu\u1ea3n l\xfd t\xe0i kho\u1ea3n",extra:[Object(N.jsx)(oe.a,{onClick:function(){return r((function(e){return!e}))},type:n?"primary":"default",children:"T\u1ea1o m\u1edbi t\xe0i kho\u1ea3n"},"create"),Object(N.jsx)(oe.a,{onClick:function(){return r((function(e){return!e}))},type:n?"default":"primary",children:"Qu\u1ea3n l\xfd t\xe0i kho\u1ea3n"},"manage")],children:[n&&Object(N.jsx)(ut,{}),!n&&Object(N.jsx)(jt,{})]})})}var bt=n(224),Ot="INIT_SOCKET",pt="TERMINATE_SOCKET",mt="STORE_SOCKET",ft="UPLOAD_IMAGE",ht=null;function gt(){return Object(N.jsxs)("div",{children:[Object(N.jsx)(V,{}),Object(N.jsx)(dt,{})]})}var xt=n(61),vt=n(412),yt=n(413),_t=n(233);n(376);function wt(e){return new Promise((function(t,n){var c=new FileReader;c.readAsDataURL(e),c.onload=function(){return t(c.result)},c.onerror=function(e){return n(e)}}))}function kt(){var e=Object(c.useState)(!1),t=Object(E.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(!1),s=Object(E.a)(a,2),o=s[0],i=s[1],u=Object(c.useState)(!1),j=Object(E.a)(u,2),d=j[0],b=j[1],m=Object(c.useState)({_id:"",email:"",name:"",password:"",newPassword:"",image:"",fileList:[],previewVisible:!1,previewImage:"",previewTitle:""}),f=Object(E.a)(m,2),h=f[0],g=f[1],x="updatable",v=Q.a.Meta,y=Object(l.c)((function(e){return e.session})),_=y.user,w=y.socket,k=Object(l.b)(),S=function(e,t,n){var c={_id:e,name:t,image:n};w?w.emit("client-upload-image",c):R("T\u1ea3i \u1ea3nh l\xean server l\u1ed7i v\xec m\u1ea5t k\u1ebft n\u1ed1i")},C=function(){var e=Object(Ae.a)(Le.a.mark((function e(t){return Le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.url||t.preview){e.next=4;break}return e.next=3,wt(t.originFileObj);case 3:t.preview=e.sent;case 4:g(Object(W.a)(Object(W.a)({},h),{},{previewImage:t.url||t.preview,previewVisible:!0,previewTitle:t.name||t.url.substring(t.url.lastIndexOf("/")+1)}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=Object(N.jsxs)("div",{children:[Object(N.jsx)(Me.a,{}),Object(N.jsx)("div",{style:{marginTop:8},children:"Upload"})]}),F=function(){B.b.loading({content:"\u0110ang x\u1eed l\xfd ...",key:x})},R=function(e){B.b.success({content:e,key:x,duration:2})};return Object(c.useEffect)((function(){_&&g((function(e){return Object(W.a)(Object(W.a)({},e),{},{_id:_._id,email:_.email,name:_.name,image:_.image,fileList:null!==_.image&&void 0!==_.image?[{uid:"0",name:"".concat(_._id,"_avatar.png"),status:"done",url:_.image||""}]:[]})})),w&&(w.once("server-send-upload-image",(function(e){e.error?(console.log("server-send-upload-image ERROR ",e.error.message),R("C\u1eadp nh\u1eadt \u1ea3nh \u0111\u1ea1i di\u1ec7n th\u1ea5t b\u1ea1i")):e.user._id===_._id&&(k({type:ft,payload:{user:e.user}}),R("C\u1eadp nh\u1eadt \u1ea3nh \u0111\u1ea1i di\u1ec7n th\xe0nh c\xf4ng"))})),w.once("server-send-change-profile-password",(function(e){console.log(e),e.user._id===_._id&&R("C\u1eadp nh\u1eadt m\u1eadt kh\u1ea9u th\xe0nh c\xf4ng"),e.error&&(console.log("erver-send-change-profile-password",e.error.message),R("C\u1eadp nh\u1eadt m\u1eadt kh\u1ea9u th\u1ea5t b\u1ea1i"))})))}),[_]),Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(V,{}),Object(N.jsxs)("div",{className:"profile",children:[Object(N.jsx)("div",{className:"profile__header",style:{display:"flex",justifyContent:"space-around",alignItems:"center"},children:" CHI TI\u1ebeT TH\xd4NG TIN C\xc1 NH\xc2N "}),Object(N.jsx)("div",{className:"profile__title",children:Object(N.jsx)(Q.a,{hoverable:!0,cover:Object(N.jsx)("img",{alt:"example",src:_.image||"https://ui-avatars.com/api/?background=random&size=400&name=".concat(_.name.split(" ").join("+")),className:"profile__image"}),actions:[Object(N.jsx)(xt.a,{title:"\u0110\u1ed5i \u1ea2nh \u0110\u1ea1i Di\u1ec7n",placement:"bottom",children:Object(N.jsx)(vt.a,{onClick:function(){r(!0)}},"ellipsis")}),Object(N.jsx)(xt.a,{title:"\u0110\u1ed5i M\u1eadt Kh\u1ea9u",placement:"bottom",children:Object(N.jsx)($e.a,{onClick:function(){i(!0)}})})],children:Object(N.jsx)(v,{title:_.name,description:"Role: ".concat(_.role),style:{textAlign:"center"}})})}),Object(N.jsxs)("div",{className:"profile__body",children:[Object(N.jsx)(O.a,{children:Object(N.jsx)(p.a,{span:24,children:Object(N.jsx)(I.a,{placeholder:"Nh\u1eadp email",prefix:"Email",value:h.email,readOnly:!0})})}),Object(N.jsx)(O.a,{children:Object(N.jsx)(p.a,{span:24,children:Object(N.jsx)(I.a,{placeholder:"Nh\u1eadp H\u1ecd v\xe0 t\xean",prefix:"H\u1ecd v\xe0 t\xean",value:h.name,readOnly:"student"===_.role,onChange:function(e){return g((function(t){return Object(W.a)(Object(W.a)({},t),{},{name:e.target.value})}))}})})})]})]}),Object(N.jsxs)(Ue.a,{title:"Thay \u0111\u1ed5i \u1ea3nh \u0111\u1ea1i di\u1ec7n",visible:n,closable:!0,onOk:function(){b(!0),setTimeout(Object(Ae.a)(Le.a.mark((function e(){var t,n;return Le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(F(),null===(t=h.fileList[h.fileList.length-1])||void 0===t){e.next=9;break}return e.next=5,wt(t.originFileObj);case 5:n=e.sent,S(_._id,_.name,n),e.next=10;break;case 9:h.fileList.length?R("T\u1ea3i \u1ea3nh kh\xf4ng t\u1ed3n t\u1ea1i"):S(_._id,_.name,null);case 10:r(!1),b(!1);case 12:case"end":return e.stop()}}),e)}))),2e3)},confirmLoading:d,onCancel:function(){r(!1)},bodyStyle:{padding:"1em"},style:{top:30},children:[Object(N.jsx)(v,{avatar:Object(N.jsx)($.a,{src:_.image}),title:_.name}),Object(N.jsx)(Q.a.Grid,{hoverable:!1,style:{width:"100%"},children:Object(N.jsxs)(se.a,{children:[Object(N.jsx)(se.a.Item,{children:Object(N.jsx)(He.a,{listType:"picture-card",fileList:h.fileList,onPreview:C,onChange:function(e){var t=e.fileList;return g(Object(W.a)(Object(W.a)({},h),{},{fileList:t}))},children:h.fileList.length>=2?null:T})}),Object(N.jsx)(Ue.a,{visible:h.previewVisible,title:h.previewTitle,footer:null,onCancel:function(){return g(Object(W.a)(Object(W.a)({},h),{},{previewVisible:!1}))},children:Object(N.jsx)("img",{alt:"example",style:{width:"100%"},src:h.previewImage})})]})})]}),"student"!==_.role&&Object(N.jsxs)(Ue.a,{title:"Thay \u0111\u1ed5i m\u1eadt kh\u1ea9u",visible:o,onCancel:function(){i(!1)},onOk:function(){var e=h.password,t=h.newPassword;if(F(),""!==e&&""!==t){var n={_id:_._id,newPassword:t,password:e};w?w.emit("client-change-profile-password",n):R("K\u1ebft n\u1ed1i server l\u1ed7i v\xec m\u1ea5t k\u1ebft n\u1ed1i")}else R("Vui l\xf2ng nh\u1eadp m\u1eadt kh\u1ea9u hay m\u1eb7t kh\u1ea9u m\u1edbi");i(!1)},children:[Object(N.jsx)(I.a.Password,{placeholder:"Nh\u1eadp m\u1eadt kh\u1ea9u hi\u1ec7n t\u1ea1i",iconRender:function(e){return e?Object(N.jsx)(yt.a,{}):Object(N.jsx)(_t.a,{})},value:h.password,onChange:function(e){return g((function(t){return Object(W.a)(Object(W.a)({},t),{},{password:e.target.value})}))}}),Object(N.jsx)(I.a.Password,{placeholder:"Nh\u1eadp m\u1eadt kh\u1ea9u m\u1edbi",iconRender:function(e){return e?Object(N.jsx)(yt.a,{}):Object(N.jsx)(_t.a,{})},value:h.newPassword,onChange:function(e){return g((function(t){return Object(W.a)(Object(W.a)({},t),{},{newPassword:e.target.value})}))}})]})]})}n(377);var St=function(e){var t=Object(i.g)(),n=Object(i.i)().query;return Object(N.jsx)("div",{style:{margin:"0.5em",maxWidth:"200px",minWidth:"150px"},children:Object(N.jsx)(G.a,{className:"group-badge",children:Object(N.jsx)("div",{onClick:function(){return e.data.value,void t.push("/search/".concat(e.data.value,"/").concat(n))},className:"group-badge__text",style:{padding:"1em",borderRadius:"1em",backgroundColor:"#95cbff",fontWeight:"bold"},children:e.data.name})})})};n(378);var Ct=function(e){var t=e.title||!1;return Object(N.jsxs)("div",{style:t?{backgroundColor:"white",border:"2px solid #eeeeee",borderTop:"none",borderRadius:"0 0 10px 10px"}:null,children:[t&&Object(N.jsxs)("div",{style:{padding:"0 1em"},children:[" ",Object(N.jsx)("h3",{children:t})," ",Object(N.jsx)(f.a,{})," "]}),Object(N.jsx)(R.b,{style:{maxHeight:"calc(100vh - 99px - 72px)",padding:"0 1em"},dataSource:[{_id:"0",name:"All",value:"all"},{_id:"1",name:"Posts",value:"posts"},{_id:"2",name:"People",value:"people"},{_id:"3",name:"Groups",value:"groups"}],renderItem:function(e){return Object(N.jsx)(St,{data:e})}})]})};n(379);function Tt(e){var t=e.name,n=e.filter;return Object(N.jsx)("div",{className:"title-search title-search__".concat(n),children:t})}var Et="SEARCH_POSTS",It="SEARCH_GROUPS",Nt="SEARCH_PEOPLE",Ft="SEARCH_START",Rt="SEARCH_SUCCESS",Gt="SEARCH_FAILURE",Pt=Q.a.Meta,Lt=Z.a.Paragraph;function At(e){var t=e.item,n=Object(c.useState)({postId:t._id,comments:[],loading:!1,error:null,isShow:!1}),r=Object(E.a)(n,2),a=r[0],s=r[1],i=Object(c.useRef)(null),u=Object(l.c)((function(e){return e.session})),j=u.socket,d=u.user,b=Object(l.b)(),O=function(e){j.emit("client-react-post",{id:t._id,user:d._id,reaction:e})};return Object(c.useEffect)((function(){j&&j.once("server-send-react-post",(function(e){var n=e.error,c=e.item,r=e.postId;n&&null!==n&&r==t._id?(console.log(n),s(Object(W.a)(Object(W.a)({},a),{},{loading:!1,error:n.message}))):c&&r===t._id&&(console.log("reacted post",c),b({type:de,payload:{reactedPost:c}}))}))}),[t]),Object(c.useEffect)((function(){s(Object(W.a)(Object(W.a)({},a),{},{loading:!0,error:null})),j&&(j.emit("client-req-cmt",{postId:t._id}),j.on("server-send-comment-list",(function(e){e.error&&e.postId==t._id?(console.log(e.error.message),s(Object(W.a)(Object(W.a)({},a),{},{loading:!1,error:e.error.message}))):e.comments&&e.postId==t._id&&s(Object(W.a)(Object(W.a)({},a),{},{loading:!1,comments:e.comments,error:null}))})))}),[t._id]),Object(c.useEffect)((function(){j&&j.on("server-send-comment-post",(function(e){var n=e.error,c=e.comment,r=e.belongToPost;null!==n&&void 0!==n&&n&&console.log("error",n.message),c&&r===t._id&&s(Object(W.a)(Object(W.a)({},a),{},{comments:[c].concat(Object(Y.a)(a.comments))}))}))}),[a]),Object(N.jsxs)("div",{style:{width:"100%",margin:"1em 0"},children:[Object(N.jsxs)(Q.a,{style:{width:"100%"},actions:[Object(N.jsx)(ke,{onClick:function(){return O("likes")},like:t.likes}),Object(N.jsx)(Te,{onClick:function(){return O("dislikes")},dislike:t.dislikes}),Object(N.jsx)(Ie,{cmtCounter:a.comments.length,onClick:function(){return s((function(e){return Object(W.a)(Object(W.a)({},e),{},{isShow:!e.isShow})}))}})],children:[Object(N.jsx)(Pt,{avatar:t.owner.image?Object(N.jsx)($.a,{src:t.owner.image}):Object(N.jsx)($.a,{src:"https://ui-avatars.com/api/?background=random&size=400&name=".concat(d.name.split(" ").join("+"))}),title:Object(N.jsxs)("p",{style:{marginBottom:0},children:[Object(N.jsxs)("b",{children:[Object(N.jsx)(o.c,{style:{color:"black"},to:"/users/".concat(t.owner._id),children:t.owner.name}),t.belongToGroup&&Object(N.jsxs)("span",{children:[Object(N.jsx)(ne.a,{}),Object(N.jsx)(o.c,{style:{color:"black"},onClick:function(){return e=t.belongToGroup._id,n=t.belongToGroup.name,void b({type:_,payload:{currentGroup:{_id:e,name:n}}});var e,n},to:"/groups/".concat(t.belongToGroup._id),children:t.belongToGroup.name})]})]}),Object(N.jsx)("br",{}),Object(N.jsx)("small",{children:J()(t.createdAt).format("hh:mm, Do MMMM YYYY")})]}),style:{padding:"1em",userSelect:"none"}}),Object(N.jsxs)(Q.a.Grid,{style:{width:"100%",paddingBottom:0},hoverable:!1,children:[Object(N.jsx)(Lt,{ellipsis:{rows:3,expandable:!0,symbol:"more"},children:t.content}),Object(N.jsx)(ee.a,{ref:i,children:t.image.map((function(e,t){return Object(N.jsx)(te.a,{style:{width:"100%"},src:e},t)}))}),Object(N.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"space-between",padding:5},children:[t.image.length>1?Object(N.jsx)(ce.a,{onClick:function(){return i.current.next()},onSelect:function(){return!1}}):null,t.image.length>1?Object(N.jsx)(re.a,{onClick:function(){return i.current.prev()},onSelect:function(){return!1}}):null]})]})]}),a.isShow&&Object(N.jsx)(ye,{containerState:a,setContainerState:function(e){return s(e)}})]})}var Ut=r.a.memo(At),Ht=Q.a.Meta;Z.a.Paragraph;function Mt(e){var t=e.item,n=Object(c.useState)({loading:!1,error:null,isShow:!1}),r=Object(E.a)(n,2),a=r[0],s=r[1],i=(Object(c.useRef)(null),Object(l.c)((function(e){return e.session}))),u=(i.socket,i.user,Object(l.b)());return Object(c.useEffect)((function(){}),[t]),Object(c.useEffect)((function(){s(Object(W.a)(Object(W.a)({},a),{},{loading:!0,error:null}))}),[t._id]),Object(c.useEffect)((function(){}),[a]),Object(N.jsx)("div",{style:{width:"100%",margin:"1em 0"},children:Object(N.jsx)(Q.a,{style:{width:"100%"},actions:[],children:Object(N.jsx)(Ht,{avatar:Object(N.jsx)($.a,{src:"https://ui-avatars.com/api/?background=random&size=400&name=".concat(t.name.split(" ").join("+"))}),title:Object(N.jsxs)("p",{style:{marginBottom:0},children:[Object(N.jsx)("b",{children:Object(N.jsx)(o.c,{style:{color:"black"},onClick:function(){return e=t._id,n=t.name,void u({type:_,payload:{currentGroup:{_id:e,name:n}}});var e,n},to:"/groups/".concat(t._id),children:t.name})}),Object(N.jsx)("br",{})]}),style:{padding:"1em",userSelect:"none"}})})})}var Dt=r.a.memo(Mt),qt=Q.a.Meta;Z.a.Paragraph;function Vt(e){var t=e.item,n=Object(c.useState)({loading:!1,error:null,isShow:!1}),r=Object(E.a)(n,2),a=r[0],s=r[1],i=(Object(c.useRef)(null),Object(l.c)((function(e){return e.session})));i.socket,i.user,Object(l.b)();return Object(c.useEffect)((function(){}),[t]),Object(c.useEffect)((function(){s(Object(W.a)(Object(W.a)({},a),{},{loading:!0,error:null}))}),[t._id]),Object(N.jsx)("div",{style:{width:"100%",margin:"1em 0"},children:Object(N.jsx)(Q.a,{style:{width:"100%"},actions:[],children:Object(N.jsx)(qt,{avatar:t.image?Object(N.jsx)($.a,{src:t.image}):Object(N.jsx)($.a,{src:"https://ui-avatars.com/api/?background=random&size=400&name=".concat(t.name.split(" ").join("+"))}),title:Object(N.jsxs)("p",{style:{marginBottom:0},children:[Object(N.jsx)("b",{children:Object(N.jsx)(o.c,{style:{color:"black"},to:"/user/".concat(t._id),children:t.name})}),Object(N.jsx)("br",{})]}),style:{padding:"1em",userSelect:"none"}})})})}var Bt=r.a.memo(Vt);function zt(e){e.type;var t=e.filter,n=Object(l.c)((function(e){return e.search})).results,r=Object(l.c)((function(e){return e.session})).socket,a=Object(l.b)(),s=function(e){return console.log("searchItemType",e,n[e]),Object(N.jsx)(O.a,{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:n[e].map((function(t){return Object(N.jsxs)("div",{className:"post",children:["posts"===e&&Object(N.jsx)(Ut,{item:t}),"groups"===e&&Object(N.jsx)(Dt,{item:t}),"people"===e&&Object(N.jsx)(Bt,{item:t})]},t._id)}))})};return Object(c.useEffect)((function(){r&&r.once("server-send-search-results",(function(e){var t=e.posts,n=e.groups,c=e.people;a({type:Ft}),t&&n&&c?a({type:Rt,payload:{posts:t,groups:n,people:c}}):t?a({type:Et,payload:{posts:t}}):n?a({type:It,payload:{groups:n}}):c&&a({type:Nt,payload:{people:c}})}))}),[n]),Object(N.jsxs)("div",{children:[Object(N.jsx)("div",{children:"all"===t&&["groups","people","posts"].map((function(e,t){return Object(N.jsxs)("div",{children:[Object(N.jsxs)(O.a,{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[Object(N.jsx)(f.a,{style:{alignItems:"center"}}),Object(N.jsx)(Tt,{filter:e,name:"".concat(e.charAt(0).toUpperCase()+e.slice(1))})]}),"groups"===e&&s("groups"),"people"===e&&s("people"),"posts"===e&&s("posts")]},t)}))}),"all"!==t&&"posts"===t&&s(t),"all"!==t&&"groups"===t&&s(t),"all"!==t&&"people"===t&&s(t)]})}n(380);var Kt=function(e){var t=Object(l.c)((function(e){return e})),n=(t.posts,t.error),r=t.mess,a=Object(i.i)().filter,s=Object(l.b)();return Object(c.useEffect)((function(){n.content&&(B.b.error(n.content),s({type:ze}))}),[n]),Object(c.useEffect)((function(){r.content&&B.b.success(r.content)}),[r.content]),Object(N.jsxs)("div",{className:"main",children:[Object(N.jsxs)("div",{className:"main__left",children:[Object(N.jsxs)("div",{className:"main__left__title",children:[Object(N.jsx)("h3",{children:"K\u1ebft qu\u1ea3 t\xecm ki\u1ebfm"}),Object(N.jsx)(f.a,{})]}),Object(N.jsx)(Ct,{})]}),Object(N.jsxs)("div",{className:"main__right",children:[Object(N.jsx)(O.a,{style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"},children:Object(N.jsx)(Tt,{name:"".concat(a.charAt(0).toUpperCase()+a.slice(1))})}),Object(N.jsx)("div",{children:Object(N.jsx)(zt,{filter:a})})]})]})};function Yt(e){var t=Object(l.c)((function(e){return e.session})).socket,n=Object(i.i)(),r=n.filter,a=n.query,s=decodeURIComponent(a);return Object(c.useEffect)((function(){t.emit("client-search-".concat(r),{query:s})}),[r,a]),Object(N.jsxs)("div",{children:[Object(N.jsx)(V,{}),Object(N.jsx)(Kt,{})]})}var Wt=function(e){var t=e.component,n=Object(Je.a)(e,["component"]),r=Object(l.c)((function(e){return e.session})),a=r.user,s=r.isFetching;return Object(c.useEffect)((function(){console.log("Protected Routes ".concat(s)),console.log("user"),console.log(a)}),[s,a]),Object(N.jsx)(i.b,Object(W.a)(Object(W.a)({},n),{},{children:s?Object(N.jsx)(z.a,{spinning:s,size:"large"}):a?Object(N.jsx)(t,{}):Object(N.jsx)(i.a,{to:"/login"})}))};var Xt=function(e){var t=e.component,n=Object(Je.a)(e,["component"]),c=Object(l.c)((function(e){return e.session})),r=c.user,a=c.isFetching;return Object(N.jsx)(i.b,Object(W.a)(Object(W.a)({},n),{},{children:a?Object(N.jsx)(z.a,{spinning:a,size:"large"}):null===r?Object(N.jsx)(t,{}):Object(N.jsx)(i.a,{to:"/"})}))};var Jt=function(e){var t=e.component,n=Object(Je.a)(e,["component"]),r=Object(l.c)((function(e){return e.session})),a=r.user,s=r.isFetching;return Object(c.useEffect)((function(){console.log("Admin Routes ".concat(s)),console.log("user"),console.log(a)}),[s,a]),Object(N.jsx)(i.b,Object(W.a)(Object(W.a)({},n),{},{children:s?Object(N.jsx)(z.a,{spinning:s,size:"large"}):a?"admin"===a.role?Object(N.jsx)(gt,{}):Object(N.jsx)(t,{}):Object(N.jsx)(i.a,{to:"/login"})}))};n(381);var Qt=function(e){var t=Object(l.b)();return Object(c.useEffect)((function(){return console.log("init_socket"),t({type:Ot}),function(){t({type:pt})}}),[]),Object(N.jsxs)(i.d,{children:[Object(N.jsx)(Jt,{path:"/admin",component:gt}),Object(N.jsx)(i.b,{path:"/me",component:Xe}),Object(N.jsx)(i.b,{path:"/setting",component:kt}),Object(N.jsx)(i.b,{path:"/search/:filter/:query",component:Yt}),Object(N.jsx)(i.b,{path:"/group/:idGroup",component:Xe}),Object(N.jsx)(i.b,{path:"/user/:idUser",component:Xe}),Object(N.jsx)(i.b,{exact:!0,path:"",component:Xe})]})};function Zt(){var e=Object(l.b)();return Object(c.useEffect)((function(){e({type:b})}),[]),Object(N.jsx)(o.a,{children:Object(N.jsx)("div",{children:Object(N.jsxs)(i.d,{children:[Object(N.jsx)(Xt,{exact:!0,path:"/login",component:at}),Object(N.jsx)(Wt,{path:"/",component:Qt})]})})})}var $t=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,414)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),c(e),r(e),a(e),s(e)}))},en=n(88),tn=n(230),nn={user:null,jwt:null,isFetching:!1,socket:null},cn={isLoading:!1,error:null},rn={listGroup:[],currentGroup:{_id:null,name:null},location:null,error:null},an={posts:[],isFetching:!1,fetchError:null,skip:0},sn={content:null},on={content:null},ln={results:{posts:[],groups:[],people:[]},isFetching:!1,fetchError:null,skip:0},un=n(32),jn=lt.a.create({baseURL:"http://localhost:4000",headers:{"Content-type":"application/json"}}),dn=Le.a.mark(pn),bn=Le.a.mark(mn),On=Le.a.mark(fn);function pn(e){return Le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(un.b)({context:localStorage,fn:localStorage.removeItem},"ACCESS_TOKEN");case 3:return e.next=5,Object(un.c)({type:j});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),dn,null,[[0,7]])}function mn(e){var t,n;return Le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(un.c)({type:d});case 3:return e.next=5,Object(un.b)({context:localStorage,fn:localStorage.getItem},"ACCESS_TOKEN");case 5:if(t=e.sent){e.next=8;break}throw new Error("No jwt for your old session");case 8:return e.next=10,jn.post("/auths/keep-session",{jwt:t});case 10:if(!(n=e.sent).data.error){e.next=13;break}throw n.data.error;case 13:return e.next=15,Object(un.c)({type:u,payload:Object(W.a)({},n.data)});case 15:e.next=22;break;case 17:return e.prev=17,e.t0=e.catch(0),console.log(e.t0),e.next=22,Object(un.c)({type:H});case 22:case"end":return e.stop()}}),bn,null,[[0,17]])}function fn(){return Le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(un.e)(H,pn);case 2:return e.next=4,Object(un.e)(b,mn);case 4:case"end":return e.stop()}}),On)}var hn=Le.a.mark(vn),gn=Le.a.mark(yn),xn=Le.a.mark(_n);function vn(e){var t,n,c,r,a,s,o;return Le.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,Object(un.c)({type:M});case 3:if(t=e.payload,n=t.username,c=t.password,n||c){i.next=6;break}throw new Error("Fields are lack!");case 6:return i.next=8,jn.post("/auths/login",{username:n,password:c});case 8:if(r=i.sent,console.log(r.data),!r.data.error){i.next=12;break}throw r.data.error;case 12:return a=r.data,s=a.user,o=a.jwt,i.next=15,Object(un.b)({context:localStorage,fn:localStorage.setItem},"ACCESS_TOKEN",o);case 15:return i.next=17,Object(un.c)({type:u,payload:{user:s,jwt:o}});case 17:return i.next=19,Object(un.c)({type:D});case 19:i.next=26;break;case 21:return i.prev=21,i.t0=i.catch(0),console.log(i.t0),i.next=26,Object(un.c)({type:q,payload:{error:i.t0}});case 26:case"end":return i.stop()}}),hn,null,[[0,21]])}function yn(e){var t,n,c,r,a,s,o,i;return Le.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return l.prev=0,l.next=3,Object(un.c)({type:M});case 3:if(e.payload.user){l.next=5;break}throw new Error("Login with Google failed");case 5:return t=e.payload.user,n=t.name,c=t.email,r=t.imageUrl,l.next=8,jn.post("/auths/login",{name:n,email:c,imageUrl:r});case 8:if(a=l.sent,console.log(a.data),!a.data.error){l.next=12;break}throw a.data.error;case 12:return s=a.data,o=s.user,i=s.jwt,l.next=15,Object(un.b)({context:localStorage,fn:localStorage.setItem},"ACCESS_TOKEN",i);case 15:return l.next=17,Object(un.c)({type:u,payload:{user:o,jwt:i}});case 17:return l.next=19,Object(un.c)({type:D});case 19:l.next=26;break;case 21:return l.prev=21,l.t0=l.catch(0),console.log(l.t0),l.next=26,Object(un.c)({type:q,payload:{error:l.t0}});case 26:case"end":return l.stop()}}),gn,null,[[0,21]])}function _n(e){return Le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(un.e)(A,vn);case 2:return e.next=4,Object(un.e)(U,yn);case 4:case"end":return e.stop()}}),xn)}var wn=Le.a.mark(Sn),kn=Le.a.mark(Cn);function Sn(e){var t,n;return Le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,jn.get("/groups/");case 3:if(200!==(t=e.sent).data.code){e.next=10;break}return n=t.data.data.map((function(e){return{_id:e._id,name:e.name}})),e.next=8,Object(un.c)({type:k,payload:{listGroup:n}});case 8:e.next=11;break;case 10:throw new Error(t.data.error);case 11:e.next=18;break;case 13:return e.prev=13,e.t0=e.catch(0),console.log(e.t0),e.next=18,Object(un.c)({type:w,payload:{error:e.t0}});case 18:case"end":return e.stop()}}),wn,null,[[0,13]])}function Cn(e){return Le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(un.d)("LIST_GROUP",Sn);case 2:case"end":return e.stop()}}),kn)}var Tn=Le.a.mark(En);function En(){return Le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(un.a)([fn(),_n(),Cn()]);case 2:case"end":return e.stop()}}),Tn)}var In=Object(tn.a)(),Nn=Object(en.c)({session:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:return Object(W.a)(Object(W.a)({},e),{},{isFetching:!0,user:null,jwt:null});case u:return Object(W.a)(Object(W.a)({},e),{},{user:t.payload.user,jwt:t.payload.jwt,isFetching:!1});case ft:return Object(W.a)(Object(W.a)({},e),{},{user:t.payload.user});case mt:return Object(W.a)(Object(W.a)({},e),{},{socket:t.payload.socket});case j:return Object(W.a)(Object(W.a)({},e),{},{user:null,jwt:null,isFetching:!1,socket:null});default:return e}},signin:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:cn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case M:return Object(W.a)(Object(W.a)({},e),{},{isLoading:!0,error:null});case D:return Object(W.a)(Object(W.a)({},e),{},{isLoading:!1,error:null});case q:return Object(W.a)(Object(W.a)({},e),{},{isLoading:!1,error:t.payload.error.message});default:return e}},groups:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k:return Object(W.a)(Object(W.a)({},e),{},{listGroup:Object(Y.a)(t.payload.listGroup)});case w:return Object(W.a)(Object(W.a)({},e),{},{error:t.payload.error});case T:return Object(W.a)(Object(W.a)({},e),{},{location:t.payload.location});case C:return Object(W.a)(Object(W.a)({},e),{},{error:t.payload.error});default:return e}},posts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:an,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ge:return console.log("fetching"),Object(W.a)(Object(W.a)({},e),{},{isFetching:!0,fetchError:null});case xe:console.log("fetch ok",t.payload.posts);var n=t.payload.posts.sort((function(e,t){return Date.parse(t.updatedAt)-Date.parse(e.updatedAt)}));return Object(W.a)(Object(W.a)({},e),{},{isFetching:!1,fetchError:null,skip:e.posts.length+n.length,posts:Object(Y.a)(n)});case ve:return Object(W.a)(Object(W.a)({},e),{},{isFetching:!1,fetchError:t.payload.error.message,skip:e.posts.length});case be:var c=t.payload.post.post;return console.log(c),console.log([c].concat(Object(Y.a)(e.posts))),Object(W.a)(Object(W.a)({},e),{},{skip:e.posts.length+1,posts:[c].concat(Object(Y.a)(e.posts))});case pe:return Object(W.a)(Object(W.a)({},e),{},{isFetching:!0,fetchError:null});case de:var r=t.payload.reactedPost;console.log("REACT_POST",r);var a=Object(Y.a)(e.posts.map((function(e){return r._id===e._id?r:e})));return Object(W.a)(Object(W.a)({},e),{},{posts:Object(Y.a)(a)});case me:return Object(W.a)(Object(W.a)({},e),{},{isFetching:!1,fetchError:null,skip:e.posts.length+t.payload.posts.length,posts:[].concat(Object(Y.a)(e.posts),Object(Y.a)(t.payload.posts))});case fe:return Object(W.a)(Object(W.a)({},e),{},{isFetching:!1,fetchError:t.payload.error.message});default:return e}},error:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Be:return{content:t.payload.error.message};case ze:return{content:null};default:return e}},mess:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:on,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ke:return{content:t.payload.mess};case Ye:return{content:null};default:return e}},search:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ln,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ft:return console.log("fetching"),Object(W.a)(Object(W.a)({},e),{},{isFetching:!0,fetchError:null});case It:return Object(W.a)(Object(W.a)({},e),{},{isFetching:!1,fetchError:null,results:Object(W.a)(Object(W.a)({},e.results),{},{groups:Object(Y.a)(t.payload.groups)})});case Et:return Object(W.a)(Object(W.a)({},e),{},{isFetching:!1,fetchError:null,results:Object(W.a)(Object(W.a)({},e.results),{},{posts:Object(Y.a)(t.payload.posts)})});case Nt:return Object(W.a)(Object(W.a)({},e),{},{isFetching:!1,fetchError:null,results:Object(W.a)(Object(W.a)({},e.results),{},{people:Object(Y.a)(t.payload.people)})});case Gt:return Object(W.a)(Object(W.a)({},e),{},{isFetching:!1,fetchError:t.payload.error});case Rt:return Object(W.a)(Object(W.a)({},e),{},{isFetching:!1,fetchError:null,results:Object(W.a)(Object(W.a)({},e),{},{posts:t.payload.posts?Object(Y.a)(t.payload.posts):Object(Y.a)(e.results.posts),groups:t.payload.groups?Object(Y.a)(t.payload.groups):Object(Y.a)(e.results.groups),people:t.payload.people?Object(Y.a)(t.payload.people):Object(Y.a)(e.results.people)})});default:return e}}}),Fn=Object(en.e)(Nn,Object(en.a)((function(e){return function(t){return function(n){var c=e.getState().session.user,r=e.getState().posts;if(n.type===Ot){var a={auth:{userId:c._id}};ht=Object(bt.io)("http://localhost:4000",a),t({type:mt,payload:{socket:ht}}),ht.on("server-init-post",(function(e){e.error?(console.log(e.error.message),t({type:ve,payload:{error:e.error}})):(console.log(e.posts),t({type:xe,payload:{posts:e.posts}}))})),ht.on("server-send-new-post",(function(e){console.log("new post created",e),t({type:be,payload:{post:e}})})),ht.on("server-send-error",(function(e){var n=e.error;console.log(n),t({type:Be,payload:{error:n}})})),ht.on("server-send-noti",(function(e){var n=e.mess;t({type:Ke,payload:{mess:n}})})),ht.on("server-send-more-post",(function(e){e.error&&t({type:fe,payload:{error:e.error}}),e.posts&&t({type:me,payload:{posts:e.posts}})})),ht.on("res-fetch-location",(function(e){console.log(e),e.error&&(t({type:C,payload:{error:e.error}}),t({type:Be,payload:{error:e.error}})),e.location&&t({type:T,payload:{location:e.location}})}))}else if(n.type===je){var s=n.payload,o=s.content,i=s.fileList,l=s.belongToGroup;ht.emit("client-make-post",{content:o,fileList:i,belongToGroup:l,owner:c._id})}else if(n.type===de){var u=n.payload.reactedPost;console.log("socketClient",de,u),t({type:de,payload:{reactedPost:u}})}else if(n.type===Oe)console.log(r),t({type:pe}),console.log(n.payload.location),ht.emit("client-fetch-more-post",{skip:r.skip,location:n.payload.location});else if(n.type===ft){var j=n.payload.user;console.log("uploadimage ",j),t({type:ft,payload:{user:j}})}else if(n.type===pt)ht.disconnect();else if(n.type===he)t({type:ge}),ht.emit("client-init-post",{location:n.payload.location});else{if(n.type!==S)return t(n);ht.emit("fetch-location",{location:n.payload.location})}}}}),In));In.run(En);var Rn=Fn;s.a.render(Object(N.jsx)(l.a,{store:Rn,children:Object(N.jsx)(Zt,{})}),document.getElementById("root")),$t()}},[[382,1,2]]]);
//# sourceMappingURL=main.e1ade127.chunk.js.map